name: melon-ticket-check
on:
  push:
    branches:
      - main    # main 브랜치에 push 시 즉시 실행
  schedule:
    - cron: '*/5 * * * *' # 5분마다 실행

jobs:
  check-ticket:
    runs-on: ubuntu-latest
    timeout-minutes: 5
    steps:
      - name: Check Tickets
        uses: mooyoul/melon-ticket-actions@v1.1.0
        with:
          product-id: 211664                # 공연 ID
          schedule-id: 100001               # 일정 ID
          seat-id: 1_0                      # 좌석 ID (테스트용)
          slack-incoming-webhook-url: ${{ secrets.SLACK_WEBHOOK_URL }}
          message: '티켓 열렸어요! 달려달려~'
